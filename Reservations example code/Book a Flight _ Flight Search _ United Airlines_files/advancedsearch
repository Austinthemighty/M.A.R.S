(function(n){"use strict";UA.Utilities.namespace("UA.Booking.CheckedSelector");UA.Booking.CheckedSelector=function(){return{init:function(){UA.Booking.CheckedSelector.bindHandler()},toggleCheckedClass:function(n){n.is(":checked")?n.addClass("checked"):n.removeClass("checked")},toggleCheckBoxClass:function(n){UA.Booking.CheckedSelector.toggleCheckedClass(n);n.parent().wrap("<div><\/div>").unwrap()},toggleRadioClass:function(t){n(".lt-ie9 .toggle-buttons input[type='radio']").each(function(){UA.Booking.CheckedSelector.toggleCheckedClass(n(this))});t.parent().wrap("<div><\/div>").unwrap()},bindHandler:function(){n(".lt-ie9 .toggle-buttons input[type='radio']").change(function(){UA.Booking.CheckedSelector.toggleRadioClass(n(this))});n(".lt-ie9 .toggle-buttons input[type='checkbox']").click(function(){UA.Booking.CheckedSelector.toggleCheckBoxClass(n(this))});n(".lt-ie9 .toggle-buttons input[type='radio']").change();n(".lt-ie9 .toggle-buttons input[type='checkbox']").change()}}}()})(jQuery),function(n){"use strict";UA.Utilities.namespace("UA.Booking.AdvancedSearch");UA.Booking.AdvancedSearch=function(){var t,i=n(".dropdown-empty-placeholder"),r=!1;return{init:function(){this.bindEvents();this.initAdvSearch();this.initSearchType();this.initSectionToggles();this.initAirportAutocomplete();this.initTravelersStepper();this.dataBindingCheck();this.setPetDropdown();this.expandOxygenPetSection();this.updatePet();this.initRecentSearchDropdown();this.initRefundFlexToolTip();UA.Booking.CheckedSelector.init()},clearClassOfServiceSelection:function(){var t=n("#ClassofService"),i={},r=n("#advancedSearchForm").data("validator");i[t.attr("name")]="";t.val("").change().removeData("previousValue");r.showErrors(i);r.resetForm()},clearRecentSearch:function(){var i=this,t=n("div#rsDropdownPanel");n.ajax({url:n("#RS-selector").data("url-crs"),type:"GET",cache:!1,dataType:"html",beforeSend:function(){t.loader({preset:"btnTile"})},error:function(){t.loader("destroy")},success:function(i){t.loader("destroy");t.empty().html(i);var r=n("span#recentSearch-text");r.html("");r.html("<table><tr>"+n("input#NoRecentSearches").val()+"<\/tr><\/table>")}})},dataBindingCheck:function(){var n=this.getCookie("fsprsselectedkey"),t=this.getCookie("fsadvodchecking");n!=="undefined"&&n!==""&&this.dataBindingCorrection();t!=="undefined"&&t!==""&&this.dataBindingCorrection()},dataBindingCorrection:function(){n("input#TripTypes_ow").is(":checked")?this.setOneWay():n("input#TripTypes_mc").is(":checked")&&this.setMultiCity()},expandOxygenPetSection:function(){var t,i,r=n("input:radio[name=PortOx]:checked").val();r!==undefined&&r==="yPortOx"?(t=n("div#OxygenPet"),t.accordion("option","active",0)):(i=n("input:radio[name=TravelwPet]:checked").val(),i!==undefined&&i==="withPet"&&(t=n("div#OxygenPet"),t.accordion("option","active",0)))},fillInForm:function(t){var r,u,i=t.data("rs");if(n.isEmptyObject(i)!==!0){n("#RS-selector").dropdown("collapse");i.AwardTravel===!0?n("input#RedeemMiles_rMiles").click():n("input#RedeemMiles_noRMiles").click();this.resetMultiCity();i.SearchType==="OW"?(n("input#TripTypes_ow").click(),this.updateTextbox(n("#Trips_0__Origin"),i.FlightOrigin),this.updateTextbox(n("#Trips_0__Destination"),i.FlightDestination),n("#Trips_0__DepartDate").val(i.isOldFlightDepDate==!1?i.FlightDepDate:"")):i.SearchType==="RT"?(n("input#TripTypes_rt").click(),this.updateTextbox(n("#Trips_0__Origin"),i.FlightOrigin),this.updateTextbox(n("#Trips_0__Destination"),i.FlightDestination),n("#Trips_0__DepartDate").val(i.isOldFlightDepDate==!1?i.FlightDepDate:""),n("#Trips_0__ReturnDate").val(i.isOldFlightRetDate==!1?i.FlightRetDate:"")):(n("input#TripTypes_mc").click(),i.rstTrip.length>=2&&(this.updateTextbox(n("#Trips_0__Origin"),i.rstTrip[0].rstOrigin),this.updateTextbox(n("#Trips_0__Destination"),i.rstTrip[0].rstDestination),n("#Trips_0__DepartDate").val(i.rstTrip[0].isOldRstDepartDate==!1?i.rstTrip[0].rstDepartDate:""),this.updateTextbox(n("#Trips_1__Origin"),i.rstTrip[1].rstOrigin),this.updateTextbox(n("#Trips_1__Destination"),i.rstTrip[1].rstDestination),n("#Trips_1__DepartDate").val(i.rstTrip[1].isOldRstDepartDate==!1?i.rstTrip[1].rstDepartDate:"")),i.rstTrip.length>=3&&(n("a#addDest3").click(),this.updateTextbox(n("#Trips_2__Origin"),i.rstTrip[2].rstOrigin),this.updateTextbox(n("#Trips_2__Destination"),i.rstTrip[2].rstDestination),n("#Trips_2__DepartDate").val(i.rstTrip[2].isOldRstDepartDate==!1?i.rstTrip[2].rstDepartDate:"")),i.rstTrip.length>=4&&(n("a#addDest4").click(),this.updateTextbox(n("#Trips_3__Origin"),i.rstTrip[3].rstOrigin),this.updateTextbox(n("#Trips_3__Destination"),i.rstTrip[3].rstDestination),n("#Trips_3__DepartDate").val(i.rstTrip[3].isOldRstDepartDate==!1?i.rstTrip[3].rstDepartDate:"")),i.rstTrip.length>=5&&(n("a#addDest5").click(),this.updateTextbox(n("#Trips_4__Origin"),i.rstTrip[4].rstOrigin),this.updateTextbox(n("#Trips_4__Destination"),i.rstTrip[4].rstDestination),n("#Trips_4__DepartDate").val(i.rstTrip[4].isOldRstDepartDate==!1?i.rstTrip[4].rstDepartDate:"")),i.rstTrip.length>=6&&(n("a#addDest6").click(),this.updateTextbox(n("#Trips_5__Origin"),i.rstTrip[5].rstOrigin),this.updateTextbox(n("#Trips_5__Destination"),i.rstTrip[5].rstDestination),n("#Trips_5__DepartDate").val(i.rstTrip[5].isOldRstDepartDate==!1?i.rstTrip[5].rstDepartDate:"")));this.resetAllStopCheckbox();r=i.TravelerCnt;n("input#NumOfAdults").val(r[1]);n("input#NumOfChildren01").val(r[2]);n("input#NumOfChildren02").val(r[3]);n("input#NumOfChildren03").val(r[4]);n("input#NumOfChildren04").val(r[5]);n("input#NumOfLapInfants").val(r[6]);n("input#NumOfInfants").val(r[7]);n("input#NumOfSeniors").val(r[8]);i.TravelerLabel!=="undefined"&&i.TravelerLabel!==""&&n("span.dropdown-trigger-text").html(i.TravelerLabel);switch(i.FlightCabinType){case"FIRST":n("input#CabinType_businessFirst").click();break;case"BUSINESS":n("input#CabinType_businessFirst").click();break;default:n("input#CabinType_econ").click()}n("#recentSearch-text").html("<table><tr>"+t.html()+"<\/tr><\/table>");u=n("div#OxygenPet");u.click();n("div#OxygenPetContent").is(":visible")&&n("div#OxygenPetContent").toggle();UA.UI.InFieldLabel.init(null,null,n("#advancedSearchForm"));UA.UI.Uniform.init(null,null,null,n("#advancedSearchForm"))}},fullDateStr:function(n){var t=new Date(n);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]+", "+n},getActiveDestCnt:function(){for(var i,r=6,t=6;t>1;t-=1)i="div#dest"+t,n(i).is(":hidden")&&(r-=1);return r},getCookie:function(t){for(var r,u=t+"=",f=document.cookie.split(";"),i=0;i<f.length;i+=1)if(r=n.trim(f[i]),r.indexOf(u)===0)return r.substring(u.length,r.length);return""},getShortNames:function(t,i,r,u){n.ajax({url:UA.Utilities.url("/Booking/FlightShopping/GetShortNames"),type:"POST",data:{org:t,dest:i},dataType:"json",success:function(n){n.index=r;u(n)}})},handleAddDestinationClick:function(t){t.preventDefault();var i=parseInt(n(this).attr("id").substr(n(this).attr("id").length-1),10),r=i-1;n("#addDest"+i+",#rmvDest"+r+", #link-add-dest"+i).hide();n("#dest"+i).show()},handlePrefConnChange:function(){var i,r=n("#HiddenPreferredConn"),f=n("#PreferredConn"),t=n("#PreferredConn").val(),u=r.val();t!==""&&this.validatePrefConn(t)&&(i=u.length>0?u+",":"",r.val(i+t).trigger("change"))},handleRecentSearchSelection:function(t){var r=this,i=n(t.currentTarget);t.preventDefault();t.type==="touchend"&&i.off("click");r.fillInForm(i)},handleRemoveDestinationClick:function(t){t.preventDefault();var r,i=parseInt(n(this).attr("id").substr(n(this).attr("id").length-1),10),u=i-1;n("#link-add-dest"+i+", #addDest"+i+", #rmvDest"+u).show();n("#dest"+i+", #pet"+i).hide();r=n("input:radio[name=TravelwPet]:checked").val();r!==undefined&&r==="withPet"&&n("#div_pet_"+u).css({display:"none"});n("#dest"+i).find(":input").each(function(){switch(this.type){case"select-one":case"text":n.uniform.update(n(this).val(""));break;case"checkbox":n.uniform.update(n(this).attr("checked",this.checked))}})},handleUnprefConnChange:function(){var i,r=n("#HiddenUnpreferredConn"),f=n("#UnpreferredConn"),t=n("#UnpreferredConn").val(),u=r.val();t!==""&&this.validateUnprefConn(t)&&(i=u.length>0?u+",":"",r.val(i+t).trigger("change"))},initAdvSearch:function(){var t=this,i=n('input[name="TripTypes"]:checked').val();this.isFlexibleSearch=n("#Flexible").prop("checked");i==="rt"?t.setRoundTrip():i==="ow"?t.setOneWay():t.setMultiCity();t.updatePet()},initSectionToggles:function(){n(".expCol").accordion({collapsible:!0,active:!1,heightStyle:"content",icons:{header:"icon-toggle-arrow-right-gray",activeHeader:"icon-toggle-arrow-down-gray"},animate:{easing:"swing",duration:200}});n("#AwardTravel").val()==="true"&&(n(".ui-accordion-header-icon").removeClass("icon-toggle-arrow-right-gray"),n(".ui-accordion-header-icon").addClass("icon-toggle-arrow-down-gray"),n(".ui-accordion-content").slideToggle().toggleClass("hidden-content"))},initSearchType:function(){var t=n("input[name='RedeemMiles']:checked").val();this.updateFarePreferences(t);n("#title-award").toggleClass("title-active",t=="rMiles");n("#title-revenue").toggleClass("title-active",t!="rMiles"&&t!==undefined)},initTravelersStepper:function(){n("#travelers-selector").travelerStepper()},initAirportAutocomplete:function(){UA.UI.Autocomplete.applyAirportAutocomplete(n("input[data-autocomplete-airport]"));UA.UI.Autocomplete.applyAirportAutocomplete(n("input[data-autocomplete-airport-connection]"),"autocomplete-airport-connection","ATACode");var t=this;n("#PreferredConn").on("typeahead:selected",function(){t.handlePrefConnChange();n(this).typeahead("val","").change()});n("#UnpreferredConn").on("typeahead:selected",function(){t.handleUnprefConnChange();n(this).typeahead("val","").change()})},initRecentSearchDropdown:function(){n("#RS-selector").dropdown();n("#RS-selector").on("show.ua.dropdown",function(){r!=!0&&(n(".dropdown-empty-placeholder").empty(),i.loader({preset:"tooltip"}),UA.Booking.AdvancedSearch.populateRecentSearches(),r=!0)})},initRefundFlexToolTip:function(){UA.UI.Tooltip.init(n(".tool-tip-refund-flex"),{content:{text:function(){return n(this).next(".tip-refund-flex").clone()}}})},oAndDCorrection:function(t){var i=n(t.currentTarget).find("option:selected").text(),r=n(t.currentTarget).attr("id"),u=r.replace("Correction","#Trips");this.updateTextbox(n(u),i)},populateRecentSearches:function(){var t=this;n.ajax({url:n("#RS-selector").data("url-rs"),type:"GET",cache:!1,dataType:"html",beforeSend:function(){},success:function(r){if((i.data("ua-loader")&&i.loader("destroy"),!(r.length<=0))&&(n("div#rsDropdownPanel").empty().html(r),r.indexOf("dropdown-empty-placeholder")===-1)){var u,f=n("input#RSSelectedKey").val();if(f!=="undefined"){u=n("ul#recentSearch-list li").get(f);t.fillInForm(n(u));return}}}})},removeConnection:function(t,i){return _.without(i,n(t).text())},renderConnList:function(n,t){var i,r="";if(!n.length)return"";for(i=0;i<n.length;++i)r=r+'<div class="connection-city-tab '+t+'" data-con-index="'+i+'">'+n[i]+'<i class="icon-connection-city-tab-close"><\/i><\/div>';return r},resetAllStopCheckbox:function(){for(var i,r,u,t=0;t<6;t++)i=n("#Trips_"+t+"__NonStop"),r=n("#Trips_"+t+"__OneStop"),u=n("#Trips_"+t+"__TwoPlusStop"),this.setStopCheckbox(i,!0),this.setStopCheckbox(r,!0),this.setStopCheckbox(u,!0)},resetMultiCity:function(){for(var i,r,t=6;t>2;t-=1)i="div#dest"+t,r="#rmvDest"+t,n(i).hasClass("hide")||n(r).click();n("#dest2").find(":input").each(function(){switch(this.type){case"select-one":case"text":n.uniform.update(n(this).val(""));break;case"checkbox":n.uniform.update(n(this).attr("checked",this.checked))}})},setAirportFName:function(t,i){var r=this;n.ajax({url:UA.Utilities.url("/Booking/FlightShopping/getAirportFName"),type:"GET",cache:!1,dataType:"json",data:{apCode:i},beforeSend:function(){},error:function(){},success:function(n){t.typeahead("val",n.result).change()}})},setFName:function(t){var i=n(t),r=i.val();r.length===3&&this.setAirportFName(i,r)},setMultiCity:function(){this.isRoundTripSearch=!1;this.isOneWaySearch=!1;this.isMultiSearch=!0;n("#label-Dest1, #multCityOption, #multCityOption2, #div-pref-time").show();n("#near-by-airports, #div-return-pref-time, #div-returnARC, #div-returnDate, #div-CboMiles2, #div-returnFlightTime, #div-flex-dates, #trip-length").hide();this.isFlexible=!1;n("#Flexible").prop("checked",!1);UA.UI.Uniform.update(n("#Flexible"));for(var i,r,u,f,t=0;t<6;t++)t>1&&(i="#Trips_"+t+"__Origin",r="#Trips_"+t+"__Destination",u=n(i).val(),f=n(r).val(),u!==""&&f!==""&&n("a#addDest"+(t+1)).click())},setOandDFullNames:function(){for(var i,r,u=this.getActiveDestCnt(),t=0;t<u;t+=1)i="#Trips_"+t+"__Origin",r="#Trips_"+t+"__Destination",this.setFName(n(i)),this.setFName(n(r))},setOneWay:function(){this.isRoundTripSearch=!1;this.isOneWaySearch=!0;this.isMultiSearch=!1;n("#near-by-airports, #div-flex-dates, #div-CboMiles2").show();n("#label-Dest1, #div-returnARC, #div-returnDate, #div-returnFlightTime, #multCityOption, #multCityOption2, #div-return-pref-time, #trip-length").hide();n("#div-pref-time").toggle(!this.isFlexibleSearch)},setPetDropdown:function(){var i=n("#NumberOfPets"),u=parseInt(n("#NumOfAdults").val(),10),f=parseInt(n("#NumOfSeniors").val(),10),r=u+f;t||(t=i.find("option").clone());r>0?i.empty().append(t.slice(0,r).clone()):i.empty().append(t);n.uniform.update(i);i.trigger("change")},setRoundTrip:function(){this.isRoundTripSearch=!0;this.isOneWaySearch=!1;this.isMultiSearch=!1;n("#near-by-airports, #div-returnARC, #div-returnARC, #div-CboMiles2, #div-flex-dates").show();n("#label-Dest1, #multCityOption, #multCityOption2").hide();n("#trip-length").toggle(this.isFlexibleSearch);n("#div-returnDate, #div-returnFlightTime, #div-return-pref-time, #div-pref-time").toggle(!this.isFlexibleSearch);n(".hasDatepicker").each(function(){n(this).change(function(){var t=n(this).val();t.length!==0?(n(this).parent().removeClass("focus"),n(this).parent().parent().find("#div-returnDate").css("display")==="none"?n(this).parent().parent().find("#trip-length").find(".selector").addClass("focus"):n(this).parent().parent().find("#div-returnDate").find(".selector").addClass("focus")):(n(this).parent().parent().find("#div-returnDate").css("display")==="none"?n(this).parent().parent().find("#trip-length").find(".selector").removeClass("focus"):n(this).parent().parent().find("#div-returnDate").find(".selector").removeClass("focus"),n(this).parent().addClass("focus"))})});n(".flight-advanced-search select").each(function(){n(this).change(function(){var t=n(this).val();t&&t.length!==0?(n(this).parent().removeClass("focus"),n(this).closest(".form-group").next().find(".selector").addClass("focus")):(n(this).closest(".form-group").next().find(".selector").removeClass("focus"),n(this).parent().addClass("focus"))})})},setStopCheckbox:function(n,t){t!="undefined"&&t!=null&&(n.is(":checked")==!0&&t==!1?n.click():n.is(":checked")==!1&&t==!0&&n.click())},setUpgradeButtons:function(t){var i=n("input[name='BuyUpgrade']:checked").val(),r=n(t.currentTarget).val();r==="businessFirst"?i!=="busUpgrade"&&n("input[name='buyUpgrade'][value='busUpgrade']").prop("checked",!0).change():r==="econ"&&i!=="econUpgrade"&&n("input[name='BuyUpgrade'][value='econUpgrade']").prop("checked",!0).change()},setUpgradeButtonsVisible:function(t){var r=n(t.currentTarget).find("option:selected").index()>0,i=n(t.currentTarget);r?n(i).closest(".form-row").next().show():(n(i).closest(".form-row").next().hide(),n(t.currentTarget).closest(".form-group").next().hide())},setValidatorErrorMessage:function(t,i,r){var u={};u[t.name]=i;n("#advancedSearchForm").validate().showErrors(u);r&&(n(t).focus(),window.scrollBy(0,-80))},showLoginModal:function(){var t=this,i=n("#aAdSearchSignIn1"),r=i.data("modalurl"),u={AllowEnrollment:!0,AllowRememberMe:!0,ShowTileAd:!1,ShowSignInHeader:!0};return n("<div id='divSignInModal' class='modal-sign-in-content' />").modal({minWidth:360,minHeight:310,containerClass:"modal-sign-in modal-tile",onOpen:function(i){i.overlay.fadeIn(100);i.container.fadeIn(100,function(){var e,f=n(this);f.loader();e=n.ajax({url:r,type:"POST",data:u,dataType:"html"});e.success(function(r){f.loader("destroy");i.data.append(r).end().find("#frm-login").submit(n.proxy(t.signIn,t)).end().fadeIn(100);UA.UI.reInit(f)});e.error(function(){f.loader("destroy");n.modal.close()})})}}),!1},signIn:function(t){var r,f,u,e=this,o=n("#aAdSearchSignIn1"),s=o.data("authurl"),i=n(t.currentTarget);return i===null||!i.valid()?!1:(r=n(i).find("#btnSignIn").loader({preset:"btnTile"}),f={MpNumber:n("#MpNumber").val(),Password:n("#Password").val(),RememberMe:n("#RememberMe").is(":checked"),DbEnvironment:n("input:radio[name=DbEnvironment]:checked").val(),AllowEnrollment:!0,AllowRememberMe:!0,ShowTileAd:!1,ShowSignInHeader:!0},u=n.ajax({url:s,type:"POST",data:f,dataType:"html"}),u.success(function(t){r.loader("destroy");var i,u=n(t).find("#hdnIsSignedIn");u!==null&&u.val()==="True"?(n.modal.close(),n(".account-tool").loader({preset:"smallRight"}),window.location.reload()):(i=n("#divSignInModal"),i.fadeOut(50,function(){jQuery(i).empty().append(t).find("#frm-login").submit(n.proxy(e.signIn,e));UA.UI.reInit(i);i.fadeIn(100,function(){UA.UI.Tooltip.showValidation(null,i)})}))}),u.error(function(){i.find("#Password").val("").change();r.loader("destroy")}),!1)},submitSearch:function(t){if(t.preventDefault(),!this.validatePetSelection())return!1;var i,r,u,f,e;return i=n("#BillingAddressCountryCode").find("option:selected").val(),r=UA.AppData.Data.Session.LangCode,u=n("#btn-search").data("poschangeurl"),e={LanguageCode:r,CountryCode:i,TargetURL:n("#advancedSearchForm").attr("action")},n.ajax({url:u,type:"POST",cache:!1,data:e,dataType:"json",error:function(){},success:function(t){t&&t.redirect?(f=t.redirect,n("#advancedSearchForm").attr("action",f).submit()):n("#advancedSearchForm").submit()}}),!1},updatePet:function(){var t,l,f,a,i,r,u,e,o,v,s,y,p,h=this,c,w=this.getActiveDestCnt();for(l=this!==undefined&&this.isOneWaySearch!==undefined?this.isOneWaySearch:!1,f=this!==undefined&&this.isRoundTripSearch!==undefined?this.isRoundTripSearch:!1,a=this!==undefined&&this.isMultiSearch!==undefined?this.isMultiSearch:!1,c=n("input[name=TravelwPet]:checked").val(),c=="withPet"?n("#label-pet-flight").show():n("#label-pet-flight").hide(),t=0;t<6;t++)i="#div_pet_"+t,r="#Trips_"+t+"__PetIsTraveling",u="#uniform-Trips_"+t+"__PetIsTraveling span.checked",c!=="withPet"?(n(i).hide(),n(r).prop("checked",!1),n(u).removeClass("checked")):(l||f)&&t>0?(n(i).hide(),n(r).prop("checked",!1),n(u).removeClass("checked")):a&&t>=w?(n(i).hide(),n(r).prop("checked",!1),n(u).removeClass("checked")):(n(i).show(),e=n("#Trips_"+t+"__Origin").val(),o=n("#Trips_"+t+"__Destination").val(),v=n("#Trips_"+t+"__DepartDate").val(),e!==""&&o!==""&&v!==""&&h.getShortNames(e,o,t,function(t){t&&(n("#pet_"+t.index+"_from").html(t.orgName),n("#pet_"+t.index+"_to").html(t.destName),n("#pet_"+t.index+"_date").html(h.fullDateStr(n("#Trips_"+t.index+"__DepartDate").val())),f&&(y=n("#Trips_"+t.index+"__Destination").val(),p=n("#Trips_"+t.index+"__Origin").val(),s=n("#Trips_"+t.index+"__ReturnDate").val(),y!==""&&p!==""&&s!==""&&(n("#div_pet_1").show(),n("#pet_1_from").html(t.destName),n("#pet_1_to").html(t.orgName),n("#pet_1_date").html(h.fullDateStr(s)))));return}))},updateFarePreferences:function(t){t==="rMiles"||n("#AwardTravel").val()=="True"?(n("#award-fare-preferences").show(),n("#revenue-fare-preferences, #promo-cert").hide()):(n("#revenue-fare-preferences, #promo-cert").show(),n("#award-fare-preferences").hide())},updateTextbox:function(n,t){n.typeahead("val",t).change()},upgradeButtonsCLick:function(t){var i=n("input[name='CabinType']:checked").val(),r=n(t.currentTarget).val();r==="busUpgrade"?i!=="businessFirst"&&n("input[name='CabinType'][value='businessFirst']").prop("checked",!0).change():r==="econUpgrade"&&i!=="econ"&&n("input[name='CabinType'][value='econ']").prop("checked",!0).change()},validatePetSelection:function(){if(n("input[name=TravelwPet]:checked").val()==="withPet"&&n(".pet-chk:checked",n("#OxygenPetContent")).length===0){var t="",i=this,r=n.ajax({url:n("#div_pet_0").data("msgurl"),type:"GET",data:{num:112,code:"F",mtype:"E"},contentType:"application/json; charset=utf-8",dataType:"json"});return r.done(function(r){t=r.message;t===""&&(t="you must select at least one trip for pet travel!");var u=document.getElementById("Trips_0__PetIsTraveling");n(u).prop("checked",!1);n.uniform.update(u);i.setValidatorErrorMessage(u,t,!0)}),!1}return!0},validatePrefConn:function(t){var u=n("#HiddenPreferredConn"),i,r,f=n("#HiddenUnpreferredConn");return(i=_.indexOf(n.map(u.val().split(","),n.trim),t)!==-1,r=_.indexOf(n.map(f.val().split(","),n.trim),t)!==-1,i)?!1:r?(n('span[data-valmsg-for="PreferredConn"]').text(t+" has already been added as unpreferred connection"),n("#PreferredConn").addClass("input-validation-error"),!1):(n('span[data-valmsg-for="PreferredConn"]').text(""),n("#PreferredConn").removeClass("input-validation-error"),!0)},validateUnprefConn:function(t){var u=n("#HiddenUnpreferredConn"),i,r,f=n("#HiddenPreferredConn");return(i=_.indexOf(n.map(u.val().split(","),n.trim),t)!==-1,r=_.indexOf(n.map(f.val().split(","),n.trim),t)!==-1,i)?!1:r?(n('span[data-valmsg-for="UnpreferredConn"]').text(t+" has already been added as preferred connection"),n("#UnpreferredConn").addClass("input-validation-error"),!1):(n('span[data-valmsg-for="UnpreferredConn"]').text(""),n("#UnpreferredConn").removeClass("input-validation-error"),!0)},bindEvents:function(){var i=this,t=n(document);t.on("change",".select-upgrade-type",n.proxy(this.setUpgradeButtonsVisible,this));t.on("change","input[name=BuyUpgrade]",n.proxy(this.upgradeButtonsCLick,this));t.on("change","input[name=TripTypes]",n.proxy(this.initAdvSearch,this));t.on("change","input[name='RedeemMiles']",n.proxy(this.initSearchType,this));t.on("change","input[name=TravelwPet]",n.proxy(this.updatePet,this));t.on("change","[id$='Origin'],[id$='Destination'],[id$='DepartDate'],[id$='ReturnDate']",n.proxy(this.updatePet,this));t.on("touchend click","#flightBooking-recentSearch li > a",n.proxy(this.handleRecentSearchSelection,this));t.on("click","#flightBooking-clear-recentSearch",n.proxy(this.clearRecentSearch,this));t.on("click","#aAdSearchSignIn1",n.proxy(this.showLoginModal,this));t.on("click","#aAdSearchSignIn2",n.proxy(this.showLoginModal,this));t.on("change",".oanddCorrection",n.proxy(this.oAndDCorrection,this));t.on("click","#travelers-select",n.proxy(this.setPetDropdown,this));t.on("click","#btn-search",n.proxy(this.submitSearch,this));t.on("click",".add-destination",this.handleAddDestinationClick);t.on("click",".remove-destination",this.handleRemoveDestinationClick);n(".airport-autocomplete").on("click",".full-airport-list",function(n){n.preventDefault();UA.Common.AirportLookup.init({target:i.currentAutocompleteField})});n(".airport-autocomplete.connection").on("click",".full-airport-list",function(n){n.preventDefault();UA.Common.AirportLookup.init({target:i.currentAutocompleteField,useAirportCode:!0})});t.on("change","input[name=CabinType]",function(n){i.clearClassOfServiceSelection();i.setUpgradeButtons(n)});t.on("click",".tt-suggestion a",function(n){n.preventDefault()});t.on("change","#HiddenPreferredConn",function(){var t=[];n(this).val()!==""&&(t=n.map(n(this).val().split(","),n.trim));n("#div-preferred-conn-tabs").html(i.renderConnList(t,"preferred"))});t.on("change","#HiddenUnpreferredConn",function(){var t=[];n(this).val()!==""&&(t=n.map(n(this).val().split(","),n.trim));n("#div-unpreferred-conn-tabs").html(i.renderConnList(t,"unpreferred"))});t.on("click",".connection-city-tab",function(t){var r;t.preventDefault();n(this).hasClass("preferred")?(r=i.removeConnection(this,n.map(n("#HiddenPreferredConn").val().split(","),n.trim)),n("#HiddenPreferredConn").val(r.join(",")).trigger("change")):(r=i.removeConnection(this,n.map(n("#HiddenUnpreferredConn").val().split(","),n.trim)),n("#HiddenUnpreferredConn").val(r.join(",")).trigger("change"))});t.on("change","#Flexible",function(){this.checked?(i.isFlexibleSearch=!0,i.initAdvSearch()):(i.isFlexibleSearch=!1,i.initAdvSearch())})}}}();n(document).ready(function(){UA.Booking.AdvancedSearch.init()})}(jQuery)